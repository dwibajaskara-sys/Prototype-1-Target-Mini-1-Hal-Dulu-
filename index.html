<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mulai 1 Hal Dulu - Pilih Durasi</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>

<body>
    
<audio id="finish-sound">
    <source src="finish.mp3" type="audio/mpeg">
</audio>
    
<div class="phone-mockup">

    <!-- HEADER -->
    <div class="header">
        <div class="header-title">Mulai 1 Hal Dulu</div>
        <div class="header-subtitle">Tidak harus sempurna, yang penting mulai</div>
    </div>

    <!-- STEP INDICATOR -->
    <div class="steps">
        <div class="step active" id="step-target">1. Target</div>
        <div class="step" id="step-focus">2. Fokus</div>
        <div class="step" id="step-done">3. Selesai</div>
    </div>

    <!-- SCREEN INPUT TARGET -->
    <div class="screen active" id="screen-input">
        <h2>Tentukan 1 Target Kecil</h2>
        <p class="description">
            Pilih satu tugas sederhana yang bisa kamu selesaikan dalam waktu tertentu.
        </p>

        <div class="input-group">
            <input type="text" id="target-input" placeholder=" " required>
            <label for="target-input">Target Fokus Hari Ini</label>
            <div class="microcopy">
                Contoh: Baca 1 bab, kerjakan 5 soal, tulis outline, review catatan
            </div>
        </div>

        <div class="duration-select">
            <label>Pilih Durasi Fokus</label>
            <select id="duration-select">
                <option value="0.5">30 Detik (Testing)</option>
                <option value="15">15 Menit (Quick Start)</option>
                <option value="25" selected>25 Menit (Pomodoro Klasik)</option>
                <option value="40">40 Menit (Deep Work)</option>
                <option value="50">50 Menit (Long Session)</option>
            </select>
        </div>

        <button class="btn-primary" id="start-focus">
            Mulai Fokus Sekarang
        </button>
    </div>

    <!-- SCREEN FOCUS -->
    <div class="screen" id="screen-focus">
        <div class="status-focus" id="status-focus">Mode Fokus Aktif ‚Ä¢ 25 Menit</div>

        <div class="timer-container">
            <div class="timer-ring" id="timer-ring"></div>
            <div class="timer" id="timer">25:00</div>
        </div>

        <div class="task-box">
            <div class="task-text" id="current-task">‚Äî</div>
            <div class="check-icon">‚úì</div>
        </div>

        <div class="motivation" id="motivation-quote">
            ‚ÄúMulai saja sudah sebuah kemajuan. Kamu tidak perlu sempurna.‚Äù
        </div>

        <div class="control-buttons">
            <button class="btn-secondary" id="pause-btn">Pause</button>
            <button class="btn-secondary" id="stop-btn">Selesai</button>
        </div>
    </div>

</div>

<script>
    const quotes = [
        "Mulai saja sudah sebuah kemajuan. Kamu tidak perlu sempurna.",
        "Fokus pada progress, bukan perfection.",
        "Satu langkah kecil hari ini, satu lompatan besar besok.",
        "Kamu lebih kuat dari yang kamu kira.",
        "Setiap menit fokus adalah investasi untuk masa depanmu.",
        "Keren! Satu tugas lagi selesai hari ini! üî•",
        "Kamu sedang membangun kebiasaan hebat, lanjutkan!"
    ];

    // DOM Elements
    const screenInput = document.getElementById('screen-input');
    const screenFocus = document.getElementById('screen-focus');
    const screenDone = document.createElement('div'); // Kita buat dinamis
    screenDone.id = 'screen-done';
    screenDone.className = 'screen';
    screenDone.innerHTML = `
        <div class="done-wrapper">
    
            <h2 class="done-title">Kamu Berhasil üéâ</h2>
            <p class="done-subtitle">
                Satu langkah kecil sudah kamu selesaikan hari ini.
            </p>
                
            <p class="done-task-text" id="done-task"></p>
            <p class="done-quote">
                ‚ÄúKonsistensi kecil mengalahkan niat besar yang jarang dilakukan.‚Äù
            </p>
    
            <div class="done-actions">
                <button class="btn-primary" id="restart-btn">Mulai 1 Hal Lagi</button>
            </div>
    
        </div>
    `;
    document.querySelector('.phone-mockup').appendChild(screenDone);

    const targetInput = document.getElementById('target-input');
    const durationSelect = document.getElementById('duration-select');
    const currentTask = document.getElementById('current-task');
    const timerDisplay = document.getElementById('timer');
    const timerRing = document.getElementById('timer-ring');
    const statusFocus = document.getElementById('status-focus');
    const motivationQuote = document.getElementById('motivation-quote');
    const startBtn = document.getElementById('start-focus');
    const pauseBtn = document.getElementById('pause-btn');
    const stopBtn = document.getElementById('stop-btn');
    const stepTarget = document.getElementById('step-target');
    const stepFocus = document.getElementById('step-focus');
    const stepDone = document.getElementById('step-done');

    let totalSeconds = 25 * 60;
    let initialMinutes = 25;
    let timerInterval = null;
    let isPaused = false;
    let currentTaskText = "";

    function formatTime(seconds) {
        const mins = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    function updateProgress() {
        const elapsed = initialMinutes * 60 - totalSeconds;
        const progress = (elapsed / (initialMinutes * 60)) * 100;
        timerRing.style.background = `conic-gradient(from 0deg, #a0e7e5 ${progress}%, #e0f7fa ${progress}%)`;
    }

    function startTimer() {
        if (timerInterval) return;
    
        timerInterval = setInterval(() => {
            if (!isPaused) {
                totalSeconds--;
                timerDisplay.textContent = formatTime(totalSeconds);
                updateProgress();
    
                if (totalSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerInterval = null;
    
                    // Putar suara
                    const sound = document.getElementById('finish-sound');
                    if (sound) {
                        sound.play();
                    }
    
                    // Tunggu 2 detik lalu masuk tahap selesai
                    setTimeout(() => {
                        celebrateCompletion();
                    }, 2000);
                }
            }
        }, 1000);
    }



    function celebrateCompletion() {
        let sessionCount = localStorage.getItem("sessionCount") || 0;
        sessionCount++;
        localStorage.setItem("sessionCount", sessionCount);

        // Confetti!
        confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 }
        });

        // Tampilkan pesan besar
        motivationQuote.innerHTML = `<strong style="color:#4caf50; font-size:1.4em;">Keren banget! Target selesai! üî•</strong>`;
        
        // Pindah ke screen selesai
        setTimeout(() => {
            screenFocus.classList.remove('active');
            screenDone.classList.add('active');
            document.getElementById('done-task').textContent = currentTaskText;
            
            stepTarget.classList.remove('active');
            stepFocus.classList.remove('active');
            stepDone.classList.add('active');
        }, 1200);
    }

    function pauseTimer() {
        isPaused = !isPaused;
        pauseBtn.textContent = isPaused ? 'Lanjut' : 'Pause';
        statusFocus.textContent = isPaused
            ? "Timer Dijeda"
            : `Mode Fokus Aktif ‚Ä¢ ${initialMinutes} Menit`;
    }

    function resetToInput() {
        clearInterval(timerInterval);
        timerInterval = null;
        totalSeconds = initialMinutes * 60;
        timerDisplay.textContent = formatTime(totalSeconds);
        updateProgress();
        isPaused = false;
        pauseBtn.textContent = 'Pause';

        startBtn.disabled = false;
        startBtn.style.opacity = "1";
        
        screenFocus.classList.remove('active');
        screenDone.classList.remove('active');
        screenInput.classList.add('active');

        stepTarget.classList.add('active');
        stepFocus.classList.remove('active');
        stepDone.classList.remove('active');
    }

    // Start button
    startBtn.addEventListener('click', () => {
        const task = targetInput.value.trim();
        if (!task) {
            alert('Isi target kecil dulu ya!');
            return;
        }

        currentTaskText = task;
        localStorage.setItem("lastTarget", task);
        initialMinutes = parseFloat(durationSelect.value);
        totalSeconds = initialMinutes * 60;

        currentTask.textContent = task;
        motivationQuote.textContent = quotes[Math.floor(Math.random() * quotes.length)];
        timerDisplay.textContent = formatTime(totalSeconds);
        statusFocus.textContent = `Mode Fokus Aktif ‚Ä¢ ${initialMinutes} Menit`;
        updateProgress();

        // Switch screen
        screenInput.classList.remove('active');
        screenFocus.classList.add('active');
        screenDone.classList.remove('active');

        stepTarget.classList.remove('active');
        stepFocus.classList.add('active');
        stepDone.classList.remove('active');

        startTimer();

        startBtn.disabled = true;
        startBtn.style.opacity = "0.6";
    });

    // Pause / Resume
    pauseBtn.addEventListener('click', pauseTimer);

    // Stop / Selesai manual
    stopBtn.addEventListener('click', () => {
        if (confirm('Yakin ingin mengakhiri sesi ini?\n\n(OK = anggap selesai, Cancel = lanjut timer)')) {
            clearInterval(timerInterval);
            timerInterval = null;
            celebrateCompletion();
        }
    });


    // Tombol Mulai Lagi di screen selesai
    document.addEventListener('click', function(e) {
        if (e.target && e.target.id === 'restart-btn') {
            targetInput.value = "";
            resetToInput();
        }
    });

    const savedTarget = localStorage.getItem("lastTarget");
    if (savedTarget) {
        targetInput.value = savedTarget;
    }

</script>

</body>
</html>











